<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pussy Destroyer 2.0 - AI Crypto Scalper</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://s3.tradingview.com/tv.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
            overflow-x: hidden;
        }
        nav {
            background: #6a0dad;
            padding: 10px;
            text-align: center;
        }
        nav a {
            color: white;
            text-decoration: none;
            margin: 15px;
            font-weight: bold;
        }
        #container {
            display: flex;
            justify-content: space-between;
        }
        #tradingview {
            width: 65%;
            height: 500px;
            background: white;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        #signals-panel {
            width: 30%;
            background: white;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            height: auto;
            text-align: left;
        }
        .long { color: green; }
        .short { color: red; }
        #trader-journal {
            margin-top: 20px;
            padding: 10px;
            background: white;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        #search-box {
            display: flex;
            margin-bottom: 10px;
        }
        #search {
            width: 80%;
            padding: 10px;
            font-size: 16px;
            margin-right: 5px;
        }
        #coin-selector {
            width: 20%;
            padding: 10px;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <nav>
        <a href="index.html">–î–∞—à–±–æ—Ä–¥</a>
        <a href="scalping.html">–°–∫–∞–ª—å–ø–∏–Ω–≥</a>
        <a href="intraday.html">–ò–Ω—Ç—Ä–∞–¥–µ–π</a>
        <a href="swing.html">–°–≤–∏–Ω–≥-—Ç—Ä–µ–π–¥–∏–Ω–≥</a>
        <a href="position.html">–ü–æ–∑–∏—Ü–∏–æ–Ω–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è</a>
        <a href="spot.html">–°–ø–æ—Ç</a>
    </nav>

    <h2 id="crypto-title">–°–∫–∞–ª—å–ø–∏–Ω–≥</h2>
    
    <div id="search-box">
        <input type="text" id="search" placeholder="–ü–æ–∏—Å–∫ –º–æ–Ω–µ—Ç—ã...">
        <select id="coin-selector"></select>
    </div>

    <div id="container">
        <div id="tradingview"></div>
        <div id="signals-panel">
            <h3>üî• Pump & Dump Club</h3>
            <div id="analysis-content">–ó–∞–≥—Ä—É–∑–∫–∞ –∞–Ω–∞–ª–∏–∑–∞...</div>
        </div>
    </div>

    <div id="trader-journal">
        <h3>üìñ –ñ—É—Ä–Ω–∞–ª —Ç—Ä–µ–π–¥–µ—Ä–∞</h3>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const urlParams = new URLSearchParams(window.location.search);
            let symbol = urlParams.get("symbol") || "BTCUSDT";
            document.getElementById("crypto-title").textContent = `–°–∫–∞–ª—å–ø–∏–Ω–≥: ${symbol}`;
            loadCoinList();
            initTradingView(symbol);
            analyzeMarket(symbol);
        });

        function loadCoinList() {
            fetch("https://fapi.binance.com/fapi/v1/ticker/24hr")
                .then(response => response.json())
                .then(data => {
                    let selector = document.getElementById("coin-selector");
                    let search = document.getElementById("search");
                    let coins = data.filter(c => c.symbol.endsWith("USDT"));

                    function updateSelector(filter) {
                        selector.innerHTML = coins
                            .filter(c => c.symbol.includes(filter.toUpperCase()))
                            .map(c => `<option value="${c.symbol}">${c.symbol}</option>`)
                            .join("");
                    }

                    search.addEventListener("input", () => updateSelector(search.value));
                    updateSelector("");

                    selector.addEventListener("change", function () {
                        window.location.search = `?symbol=${this.value}`;
                    });
                });
        }

        function initTradingView(symbol) {
            new TradingView.widget({
                container_id: "tradingview",
                symbol: `BINANCE:${symbol}`,
                interval: "30",
                theme: "light",
                style: "1",
                locale: "ru",
                toolbar_bg: "#f1f3f6",
                enable_publishing: false,
                hide_side_toolbar: false,
                allow_symbol_change: true,
                autosize: true
            });
        }

        function analyzeMarket(symbol) {
            fetch(`https://fapi.binance.com/fapi/v1/ticker/24hr?symbol=${symbol}`)
                .then(res => res.json())
                .then(tickerData => {
                    if (!tickerData || tickerData.code) {
                        console.error("–û—à–∏–±–∫–∞: –î–∞–Ω–Ω—ã–µ –ø–æ —Ç–∏–∫–µ—Ä—É –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã.");
                        return;
                    }

                    const lastPrice = parseFloat(tickerData.lastPrice);
                    const changePercent = parseFloat(tickerData.priceChangePercent);
                    const volume = parseFloat(tickerData.volume);

                    fetch(`https://fapi.binance.com/fapi/v1/depth?symbol=${symbol}&limit=10`)
                        .then(res => res.json())
                        .then(orderBook => {
                            let bids = orderBook.bids.slice(0, 5).map(bid => parseFloat(bid[1])).reduce((a, b) => a + b, 0);
                            let asks = orderBook.asks.slice(0, 5).map(ask => parseFloat(ask[1])).reduce((a, b) => a + b, 0);

                            let direction = asks < bids ? "üöÄ –õ–æ–Ω–≥" : "üìâ –®–æ—Ä—Ç";
                            let entry = lastPrice;
                            let stopLoss = direction === "üöÄ –õ–æ–Ω–≥" ? entry * 0.98 : entry * 1.02;
                            let takeProfit1 = direction === "üöÄ –õ–æ–Ω–≥" ? entry * 1.02 : entry * 0.98;
                            let takeProfit2 = direction === "üöÄ –õ–æ–Ω–≥" ? entry * 1.04 : entry * 0.96;
                            let takeProfit3 = direction === "üöÄ –õ–æ–Ω–≥" ? entry * 1.06 : entry * 0.94;

                            let reasoning = [
                                asks < bids ? "üü¢ –í —Å—Ç–∞–∫–∞–Ω–µ –¥–æ–º–∏–Ω–∏—Ä—É—é—Ç –ø–æ–∫—É–ø–∞—Ç–µ–ª–∏, —Ü–µ–Ω–∞ –≤–µ—Ä–æ—è—Ç–Ω–æ –ø–æ–π–¥–µ—Ç –≤–≤–µ—Ä—Ö." : "üî¥ –í —Å—Ç–∞–∫–∞–Ω–µ –±–æ–ª—å—à–µ –ø—Ä–æ–¥–∞–∂, –±—ã—á–∫–æ–≤ –µ–±—É—Ç –Ω–∞ –ø–æ–Ω–∏–∂–µ–Ω–∏–µ.",
                                changePercent > 2 ? "‚ö° –¶–µ–Ω–∞ —É–∂–µ –∏–¥–µ—Ç –≤ –∏–º–ø—É–ª—å—Å–µ, –æ—Å—Ç–æ—Ä–æ–∂–Ω–µ–µ —Å –≤—Ö–æ–¥–æ–º." : "üìâ –¶–µ–Ω–∞ –ø–æ–∫–∞ –≤ –∑–æ–Ω–µ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è, –º–æ–∂–Ω–æ –∑–∞–ª–µ—Ç–∞—Ç—å.",
                                stopLoss < lastPrice ? "üõë –°—Ç–æ–ø-–ª–æ—Å—Å —Å –∑–∞–ø–∞—Å–æ–º, —á—Ç–æ–±—ã –Ω–µ –≤—ã–±–∏–ª–æ —Ñ–µ–π–∫–æ–≤—ã–º–∏ —Å–≤–µ—á–∞–º–∏." : "üìâ –õ—É—á—à–µ –¥–≤–∏–Ω—É—Ç—å —Å—Ç–æ–ø –ø–æ–±–ª–∏–∂–µ, –º–æ–∂–µ—Ç –≤—ã–±–∏—Ç—å."
                            ];

                            document.getElementById("analysis-content").innerHTML = `
                                <strong>–°–∏–≥–Ω–∞–ª:</strong> ${direction}<br>
                                üìç –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞: <strong>$${entry.toFixed(2)}</strong><br>
                                üõë –°—Ç–æ–ø-–ª–æ—Å—Å: <strong>$${stopLoss.toFixed(2)}</strong><br>
                                üéØ –¢–µ–π–∫ 1: <strong>$${takeProfit1.toFixed(2)}</strong><br>
                                üéØ –¢–µ–π–∫ 2: <strong>$${takeProfit2.toFixed(2)}</strong><br>
                                üéØ –¢–µ–π–∫ 3: <strong>$${takeProfit3.toFixed(2)}</strong><br>
                                <hr>
                                <strong>–ê—Ä–≥—É–º–µ–Ω—Ç—ã:</strong> ${reasoning.join("<br>")}
                            `;
                        });
                });
        }
    </script>
</body>
</html>
