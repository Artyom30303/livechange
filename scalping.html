<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pussy Destroyer 2.0 - AI Crypto Scalper</title>
    <!-- jQuery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <!-- TradingView -->
    <script src="https://s3.tradingview.com/tv.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
        }
        #search, #coin-selector {
            width: 100%;
            padding: 10px;
            font-size: 16px;
            margin-bottom: 10px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
        }
        th, td {
            padding: 10px;
            border: 1px solid #ddd;
            text-align: left;
            cursor: pointer;
        }
        th {
            background-color: #6a0dad;
            color: white;
        }
        .green { color: green; }
        .red { color: red; }
        #tradingview {
            width: 70%;
            height: 500px;
            float: left;
        }
        #analysis, #ai-chat, #journal {
            width: 28%;
            float: right;
            background: white;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 10px;
        }
        nav {
            background: #6a0dad;
            padding: 10px;
        }
        nav a {
            color: white;
            text-decoration: none;
            margin: 10px;
            font-weight: bold;
        }
        #chat-input {
            width: 80%;
            padding: 10px;
            margin-top: 10px;
        }
        #send-btn {
            padding: 10px;
            background: #6a0dad;
            color: white;
            border: none;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <nav>
        <a href="index.html">–î–∞—à–±–æ—Ä–¥</a>
        <a href="scalping.html">–°–∫–∞–ª—å–ø–∏–Ω–≥</a>
        <a href="intraday.html">–ò–Ω—Ç—Ä–∞–¥–µ–π</a>
        <a href="swing.html">–°–≤–∏–Ω–≥-—Ç—Ä–µ–π–¥–∏–Ω–≥</a>
        <a href="position.html">–ü–æ–∑–∏—Ü–∏–æ–Ω–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è</a>
        <a href="spot.html">–°–ø–æ—Ç</a>
    </nav>
    
    <h2 id="crypto-title">–ì—Ä–∞—Ñ–∏–∫</h2>
    <input type="text" id="search" placeholder="–ü–æ–∏—Å–∫ –º–æ–Ω–µ—Ç—ã...">
    <select id="coin-selector"></select>
    
    <div id="crypto-stats">–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...</div>
    <div id="tradingview"></div>
    <div id="analysis">–ê–Ω–∞–ª–∏–∑ —Ä—ã–Ω–∫–∞...</div>
    <div id="journal">üìñ –ñ—É—Ä–Ω–∞–ª —Ç—Ä–µ–π–¥–µ—Ä–∞</div>
    <div id="ai-chat">AI Pussy Destroyer: –ì–æ—Ç–æ–≤ –∫ —Ä–∞–∑—ä—ë–±—É —Ä—ã–Ω–∫–∞! üöÄ</div>
    <input type="text" id="chat-input" placeholder="–ù–∞–ø–∏—Å–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ...">
    <button id="send-btn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
    
    <script>
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —á–∏—Å–µ–ª
        function formatNumber(num) {
            return new Intl.NumberFormat('ru-RU', { maximumFractionDigits: 2 }).format(num);
        }

        document.addEventListener("DOMContentLoaded", function() {
            // 1. –ß–∏—Ç–∞–µ–º symbol –∏–∑ URL
            const urlParams = new URLSearchParams(window.location.search);
            const symbol = urlParams.get("symbol") || "BTCUSDT";

            // 2. –û–±–Ω–æ–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫
            document.getElementById("crypto-title").textContent = `–°–∫–∞–ª—å–ø–∏–Ω–≥: ${symbol}`;

            // 3. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –≥—Ä–∞—Ñ–∏–∫ TradingView
            new TradingView.widget({
                container_id: "tradingview",
                symbol: `BINANCE:${symbol}`,
                interval: "5",
                theme: "light",
                style: "1",
                locale: "ru",
                toolbar_bg: "#f1f3f6",
                enable_publishing: false,
                hide_side_toolbar: false,
                allow_symbol_change: true,
                autosize: true
            });

            // 4. –ü–æ–¥–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ –º–æ–Ω–µ—Ç–µ
            fetch(`https://fapi.binance.com/fapi/v1/ticker/24hr?symbol=${symbol}`)
                .then(res => res.json())
                .then(data => {
                    document.getElementById("crypto-stats").innerHTML = `
                        <strong>–¢–µ–∫—É—â–∞—è —Ü–µ–Ω–∞:</strong> $${formatNumber(data.lastPrice)}<br>
                        <strong>–ò–∑–º–µ–Ω–µ–Ω–∏–µ 24—á:</strong>
                        <span class="${data.priceChangePercent >= 0 ? 'green' : 'red'}">
                            ${formatNumber(data.priceChangePercent)}%
                        </span><br>
                        <strong>–û–±—ä–µ–º 24—á:</strong> ${formatNumber(data.volume)}
                    `;
                    document.getElementById("analysis").innerHTML = `
                        –°–∏–≥–Ω–∞–ª: ${data.priceChangePercent > 2 ? 'üöÄ –õ–æ–Ω–≥' : 'üìâ –®–æ—Ä—Ç'}
                    `;
                })
                .catch(err => console.error(err));

            // 5. –ó–∞–≥—Ä—É–∂–∞–µ–º —Å–ø–∏—Å–æ–∫ –º–æ–Ω–µ—Ç
            fetch("https://fapi.binance.com/fapi/v1/ticker/24hr")
                .then(res => res.json())
                .then(data => {
                    // –§–∏–ª—å—Ç—Ä—É–µ–º –º–æ–Ω–µ—Ç—ã, –∑–∞–∫–∞–Ω—á–∏–≤–∞—é—â–∏–µ—Å—è –Ω–∞ USDT
                    const coins = data.filter(item => item.symbol.endsWith("USDT"));
                    const selector = document.getElementById("coin-selector");
                    const search = document.getElementById("search");

                    // –§—É–Ω–∫—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –º–æ–Ω–µ—Ç
                    function updateSelector(filter) {
                        const filtered = coins.filter(item => item.symbol.includes(filter.toUpperCase()));
                        selector.innerHTML = filtered
                            .map(item => `<option value="${item.symbol}">${item.symbol}</option>`)
                            .join("");
                    }

                    // –ü—Ä–∏ –≤–≤–æ–¥–µ —Ç–µ–∫—Å—Ç–∞ –≤ –ø–æ–∏—Å–∫
                    search.addEventListener("input", () => {
                        updateSelector(search.value);
                    });

                    // –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Å–µ
                    updateSelector("");

                    // –ü—Ä–∏ –≤—ã–±–æ—Ä–µ –∏–∑ —Å–ø–∏—Å–∫–∞ - –º–µ–Ω—è–µ–º URL –∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É
                    selector.addEventListener("change", () => {
                        const newSymbol = selector.value;
                        window.location.search = `?symbol=${newSymbol}`;
                    });
                })
                .catch(err => console.error(err));

            // 6. –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
            document.getElementById("send-btn").addEventListener("click", () => {
                const inputElem = document.getElementById("chat-input");
                if (inputElem.value.trim() !== "") {
                    const aiChat = document.getElementById("ai-chat");
                    aiChat.innerHTML += `<br>ü§ñ ${inputElem.value}`;
                    inputElem.value = "";
                }
            });
        });
    </script>
</body>
</html>
