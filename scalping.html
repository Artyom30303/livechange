<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pussy Destroyer 2.0 - AI Crypto Scalper</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://s3.tradingview.com/tv.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 20px;
        }
        nav {
            background: #6a0dad;
            padding: 10px;
            text-align: center;
        }
        nav a {
            color: white;
            text-decoration: none;
            margin: 15px;
            font-weight: bold;
            font-size: 16px;
        }
        #container {
            display: flex;
            flex-direction: row;
            justify-content: space-between;
        }
        #tradingview {
            width: 58%;
            height: 500px;
            background: white;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        #signals {
            width: 38%;
            background: white;
            padding: 15px;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            height: auto;
        }
        #journal {
            width: 100%;
            margin-top: 15px;
            padding: 10px;
            background: white;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        input, select {
            width: 100%;
            padding: 10px;
            font-size: 16px;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <nav>
        <a href="index.html">–î–∞—à–±–æ—Ä–¥</a>
        <a href="scalping.html">–°–∫–∞–ª—å–ø–∏–Ω–≥</a>
        <a href="intraday.html">–ò–Ω—Ç—Ä–∞–¥–µ–π</a>
        <a href="swing.html">–°–≤–∏–Ω–≥-—Ç—Ä–µ–π–¥–∏–Ω–≥</a>
        <a href="position.html">–ü–æ–∑–∏—Ü–∏–æ–Ω–Ω–∞—è —Ç–æ—Ä–≥–æ–≤–ª—è</a>
        <a href="spot.html">–°–ø–æ—Ç</a>
    </nav>

    <h2 id="crypto-title">–°–∫–∞–ª—å–ø–∏–Ω–≥</h2>
    <input type="text" id="search" placeholder="–ü–æ–∏—Å–∫ –º–æ–Ω–µ—Ç—ã...">
    <select id="coin-selector"></select>

    <div id="container">
        <div id="tradingview"></div>
        <div id="signals">
            <h3>üî• Pump & Dump Club</h3>
            <div id="analysis-content">‚è≥ –ñ–¥–µ–º –∞–Ω–∞–ª–∏–∑–∞ —Ä—ã–Ω–∫–∞...</div>
        </div>
    </div>

    <div id="journal">üìñ –ñ—É—Ä–Ω–∞–ª —Ç—Ä–µ–π–¥–µ—Ä–∞</div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const urlParams = new URLSearchParams(window.location.search);
            let symbol = urlParams.get("symbol") || "BTCUSDT";
            document.getElementById("crypto-title").textContent = `–°–∫–∞–ª—å–ø–∏–Ω–≥: ${symbol}`;

            new TradingView.widget({
                "container_id": "tradingview",
                "symbol": `BINANCE:${symbol}`,
                "interval": "30",
                "theme": "light",
                "style": "1",
                "locale": "ru",
                "toolbar_bg": "#f1f3f6",
                "enable_publishing": false,
                "hide_side_toolbar": false,
                "allow_symbol_change": true,
                "autosize": true
            });

            analyzeMarket(symbol);
            fetchCryptoList();
        });

        function fetchCryptoList() {
            fetch("https://api.binance.com/api/v3/exchangeInfo")
                .then(res => res.json())
                .then(data => {
                    let select = document.getElementById("coin-selector");
                    select.innerHTML = "";
                    data.symbols
                        .filter(s => s.symbol.endsWith("USDT"))
                        .forEach(s => {
                            let option = document.createElement("option");
                            option.value = s.symbol;
                            option.textContent = s.symbol;
                            select.appendChild(option);
                        });
                    select.value = "BTCUSDT";
                    select.addEventListener("change", function () {
                        window.location.href = `scalping.html?symbol=${this.value}`;
                    });
                });
        }

        function analyzeMarket(symbol) {
            fetch(`https://fapi.binance.com/fapi/v1/klines?symbol=${symbol}&interval=30m&limit=50`)
                .then(res => res.json())
                .then(candles => {
                    let prices = candles.map(c => parseFloat(c[4]));
                    let last = prices.slice(-5);
                    let lastPrice = prices[prices.length - 1];
                    let pattern = detectPattern(last);
                    let entry, stopLoss, takeProfit1, takeProfit2, takeProfit3;
                    let signalText = "–ñ–¥–µ–º –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π —Å–µ—Ç–∞–ø.";
                    let signalType = "";

                    if (pattern === "–§–ª–∞–≥") {
                        signalText = "üöÄ –§–ª–∞–≥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω, –∑–∞—Ö–æ–¥–∏–º –≤ –ª–æ–Ω–≥!";
                        signalType = "–õ–æ–Ω–≥";
                        entry = lastPrice * 1.01;
                        stopLoss = lastPrice * 0.98;
                    } else if (pattern === "–ì–æ–ª–æ–≤–∞ –∏ –ø–ª–µ—á–∏") {
                        signalText = "üìâ –ì–æ–ª–æ–≤–∞ –∏ –ø–ª–µ—á–∏! –ì–æ—Ç–æ–≤–∏–º—Å—è –∫ —à–æ—Ä—Ç—É!";
                        signalType = "–®–æ—Ä—Ç";
                        entry = lastPrice * 0.99;
                        stopLoss = lastPrice * 1.02;
                    }

                    if (entry) {
                        takeProfit1 = entry * 1.02;
                        takeProfit2 = entry * 1.04;
                        takeProfit3 = entry * 1.06;
                    }

                    document.getElementById("analysis-content").innerHTML = `
                        <strong>–°–∏–≥–Ω–∞–ª:</strong> ${signalType} - ${signalText}<br>
                        üìç –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞: <strong>${entry ? `$${entry.toFixed(2)}` : "–ñ–¥–µ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è"}</strong><br>
                        üõë –°—Ç–æ–ø-–ª–æ—Å—Å: <strong>${stopLoss ? `$${stopLoss.toFixed(2)}` : "-"}</strong><br>
                        üéØ –¢–µ–π–∫ 1: <strong>${takeProfit1 ? `$${takeProfit1.toFixed(2)}` : "-"}</strong><br>
                        üéØ –¢–µ–π–∫ 2: <strong>${takeProfit2 ? `$${takeProfit2.toFixed(2)}` : "-"}</strong><br>
                        üéØ –¢–µ–π–∫ 3: <strong>${takeProfit3 ? `$${takeProfit3.toFixed(2)}` : "-"}</strong><br>
                    `;
                });
        }
    </script>
</body>
</html>
